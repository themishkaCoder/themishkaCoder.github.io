<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Chat</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
</head>
<body>
    <header>
        <div class="nav">
            <div class="logo">
                <h1>themishkaCoder</h1>
            </div>
            <div class="menu">
                <div class="menuList" id="menuList">
                    <a href="" class="mainLink"></a>
                    <a href="" class="messLink"></a>
                    <a href="" class="helpLink"></a> 
                    <a href="" class="profileLink"></a> 
                </div>

                <button id="openMenu"><i class="fas fa-bars"></i></button>
                

                <div class="menuListJs" id="menuListJs">
                    <div class="exit" id="exitMenu">
                        <button class="m-auto"><i class="fas fa-times-circle"></i></button>
                        
                    </div>
                    <ul>
                        <li><a href="" class="mainLink"></a></li>
                        <li><a href="" class="messLink"></a></li>
                        <li><a href="" class="helpLink"></a></li>
                        <li><a href="" class="profileLink"></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </header>

    <article>
        <div class="letters">
            <h1 class="text-center">Чат</h1>
            <form action="" id="sendForm">
                <div class="chat">
                    <textarea name="" cols="30" rows="10" id="allMess"></textarea>
                    <input type="text" id="userName" placeholder="Name">
                    <input type="text" placeholder="Сообщение..." id="messInput">
                    <button type="submit">Отправить</button>
                </div>
            </form>
        </div>
        <div class="sidebar">
            <h2>Онлайн:</h2>
            <ul id="onlineUserList">
                <li><p>Mihail</p></li>
            </ul>
        </div>
    </article>


    <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
    <script
    src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
    crossorigin="anonymous"></script>
    <script src="js/main.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(function(){
            const socket = io.connect();
            var $sendForm = $("#sendForm");
            var $messInput = $("#messInput");
            var $userN = $("#userName");
            //var $allMess = $("#allMess");
            var testM = document.getElementById("test");

            $sendForm.submit((event) => {
                event.preventDefault();
                socket.emit("sendMess", $messInput.val(), $userN.val());
                $messInput.val("");
            });

            socket.on("addMess", (data) => {
                //$allMess.text = data.msg;
                //testM.innerText = data.msg;
                //$("#allMess").append($("li").text(data.msg));
                //$("#allMess").text(data.msg + "\n");
                $("#allMess").val($("#allMess").val() + data.user + ": " + data.msg + "\n");

            });
        });

        

    </script>


    <script>if (window.module) module = window.module;</script>
</body>
</html>